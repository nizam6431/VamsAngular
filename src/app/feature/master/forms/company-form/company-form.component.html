<!-- View Company Details -->
<div class="d-flex flex-column flex-1 scroll-y" *ngIf="formData.mode == 'show' && viewData">
    <div class="popup-header">
        <button (click)="cancel()" class="btn-close popup-close position-absolute opacity-100"></button>
        <div class="popup-title-wrapper d-flex align-items-center" *ngIf="productType != ProductType.Hospital">
            <span class="popup-title d-inline-flex align-items-center fs-sm fw-bold position-relative">{{
                "Company.compDetails" | translate }}</span>
        </div>
        <div class="popup-title-wrapper d-flex align-items-center" *ngIf="productType == ProductType.Hospital">
            <span class="popup-title d-inline-flex align-items-center fs-sm fw-bold position-relative">{{
                "Company.roomDetails" | translate }}</span>
        </div>
    </div>
    <div class="popup-content">
        <div class="row gx-5" *ngIf="productType != ProductType.Hospital && !SeepzWorkFlow">
            <div class="col-md-6">
                <div class="row mb-3">
                    <label for="" class="col-md-3 col-form-label">{{
                        "Company.light" | translate
                        }}</label>
                    <div class="col-md-9">
                        <div
                            class="theme-logo-wrapper d-flex align-items-center justify-content-center border overflow-hidden p-1">
                            <img [src]="LightLogoUrl" class="img-fluid" />
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-md-6">
                <div class="row mb-3">
                    <label for="" class="col-md-3 col-form-label">{{
                        "Company.dark" | translate
                        }}</label>
                    <div class="col-md-9">
                        <div
                            class="theme-logo-wrapper d-flex align-items-center justify-content-center bg-dark overflow-hidden p-1">
                            <img [src]="darkLogoUrl" class="img-fluid" />
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="row gx-5">
            <div class="col-md-6">
                <div class="row mb-3">
                    <label for="companyName1" class="col-md-3 col-form-label">{{
                        "Company.name" | translate
                        }}</label>
                    <div class="col-md-9">
                        <input type="text" readonly class="form-control-plaintext" id="companyName"
                            value="{{ viewData.data.name }}" />
                    </div>
                </div>
            </div>
            <div class="col-md-6">
                <div class="row mb-3">
                    <label for="companyShortName" class="col-md-3 col-form-label">{{
                        "Company.shortName" | translate
                        }}</label>
                    <div class="col-md-9">
                        <input type="text" readonly class="form-control-plaintext" id="companyShortName"
                            value="{{ viewData.data.shortName }}" />
                    </div>
                </div>
            </div>
        </div>
        <div class="row gx-5">
            <div class="col-md-6">
                <div class="row mb-3">
                    <label for="companyEmail" class="col-md-3 col-form-label">{{
                        "Company.email" | translate
                        }}</label>
                    <div *ngIf="viewData.data.email; else emptyEmail" class="col-md-9">
                        <input type="text" readonly class="form-control-plaintext" id="companyEmail"
                            value="{{ viewData.data.email }}" />
                    </div>
                    <ng-template #emptyEmail>
                        <div class="col-md-9 empty">
                            <input type="text" readonly class="form-control-plaintext" id="companyEmail"
                                value="{{'Company.empty' | translate}}" />
                        </div>
                    </ng-template>
                </div>
            </div>
            <div class="col-md-6">
                <div class="row mb-3">
                    <label for="companyStatus" class="col-md-3 col-form-label">{{
                        "Company.status" | translate
                        }}</label>
                    <div class="col-md-9">
                        <input type="text" readonly class="form-control-plaintext" id="companyStatus"
                            value="{{ viewData.data.status }}" />
                    </div>
                </div>
            </div>
        </div>
        <!-- <div class="row gx-5" *ngIf="viewData.data.accessControl else noAccessControl">
            <div class="col-md-6">
                <div class="row mb-3">
                    <label for="" class="col-md-3 col-form-label">{{'Company.ShowAccessMethod'|translate}}
                    </label>
                    <div class="col-md-9">
                        <div class="vams-checkbox-wrapper d-flex flex-wrap">
                            <ng-container *ngFor="let item of acessCantrolList | keyvalue ;let i=index">
                                <mat-checkbox class="pointer-event-none me-3"
                                    *ngIf="selectedAccessCantrol.includes(convertToInt(item.value))"
                                    [checked]="selectedAccessCantrol.includes(convertToInt(item.value))"
                                    (change)="getAccessCantrol($event,item,i)">
                                    {{'Company.'+item.key|translate}}
                                </mat-checkbox>
                            </ng-container>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <ng-template #noAccessControl>
            <p class="form-control-plaintext">{{'Company.NoAccessMethodSet'|translate}}</p>
        </ng-template> -->
        <div class="card bg-floral-white" *ngFor="let unitData of viewData.data.companyUnits; let i = index">
            <div class="card-body">
                <h6 class="card-title fs-sm fw-semi-bold mb-3">
                    {{ "Company.unit" | translate }} {{ i + 1 }}
                </h6>
                <div class="row gx-5">
                    <div class="col-md-6">
                        <div class="row mb-3">
                            <label for="companyBuilding" class="col-md-3 col-form-label">{{
                                "Company.building" | translate
                                }}</label>
                            <div class="col-md-9">
                                <input type="text" readonly class="form-control-plaintext" id="companyBuilding"
                                    value="{{ unitData.level3Address.name }}" />
                            </div>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="row mb-3">
                            <label for="companyOfficeNo" class="col-md-3 col-form-label">{{
                                "Company.unit" | translate
                                }}</label>
                            <div class="col-md-9">
                                <input type="text" readonly class="form-control-plaintext" id="companyOfficeNo"
                                    value="{{ unitData.level3Address.officeNo }}" />
                            </div>
                        </div>
                    </div>
                </div>
                <div class="row gx-5">
                    <div class="col-md-6">
                        <div class="row">
                            <label for="companyContact" class="col-md-3 col-form-label">{{
                                "Company.contact" | translate
                                }}</label>
                            <div *ngIf="
                  unitData?.level3Address.contactIsd &&
                    unitData?.level3Address.contactMobile;
                  else emptyNumber
                " class="col-md-9">
                                <input type="text" readonly class="form-control-plaintext" id="companyContact" value="+{{
                    unitData?.level3Address.contactIsd +
                      ' ' +
                      formatCellNumber(unitData?.level3Address.contactMobile)
                  }}" />
                            </div>
                            <ng-template #emptyNumber>
                                <div class="col-md-9">
                                    <input type="text" readonly class="form-control-plaintext" id="companyContact"
                                        value="{{'Company.empty' | translate}}" />
                                </div>
                            </ng-template>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="row">
                            <label for="companyFloor" class="col-md-3 col-form-label">{{
                                "Company.floor" | translate
                                }}</label>
                            <div class="col-md-9">
                                <input type="text" readonly class="form-control-plaintext" id="companyFloor"
                                    value="{{ unitData.level3Address.floorNo }}" />
                            </div>
                        </div>
                    </div>
                </div>
                <!--
        <div *ngIf="!isExcel">
          <div *ngIf="unitData['admins'].length == 1; else multiAdmins">
            <div *ngFor="let adminData of unitData.admins">
              <div class="row">
                <div class="col-md-6 col-sm-12">
                  <div class="dilogbox-label">
                    {{ "Company.adminEmail" | translate }}
                  </div>
                  <div class="dilogbox-value">{{ adminData.email }}</div>
                </div>
                <div class="col-md-6 col-sm-12">
                  <div class="dilogbox-label">
                    {{ "Company.cellNo" | translate }}
                  </div>
                  <div class="dilogbox-value">{{ adminData.mobileNo }}</div>
                </div>
                <div class="col-md-6 col-sm-12">
                  <div class="dilogbox-label">
                    {{ "Company.firstName" | translate }}
                  </div>
                  <div class="dilogbox-value">{{ adminData.firstName }}</div>
                </div>
                <div class="col-md-6 col-sm-status">
                  <div class="dilogbox-label">
                    {{ "Company.lastName" | translate }}
                  </div>
                  <div class="dilogbox-value">{{ adminData.lastName }}</div>
                </div>
              </div>
            </div>
          </div>
        </div>
        <ng-template #multiAdmins>
          <div *ngFor="let adminData of unitData.admins">
            <div class="col-md-6 col-sm-12">
              <div class="dilogbox-label">
                {{ adminData["firstName"] }} {{ adminData["lastName"] }}
              </div>
              <div class="dilogbox-value">
                <p
                  class="show-icon"
                  (click)="employeeDetails(adminData['employeeId'])"
                ></p>
              </div>
            </div>
          </div>
        </ng-template>
        -->
            </div>
        </div>
    </div>
    <div class="popup-footer d-flex align-items-center gap-3">
        <button *isPermissible="permissionKeyObj.MASTERVIEWEDIT" class="btn btn-sm btn-primary-dark px-3"
            (click)="getCompanyById(true)">
            {{ "CommonToken.Edit" | translate }}
        </button>
        <button class="btn btn-sm btn-white px-3" (click)="cancel()">
            {{ "CommonToken.Cancel" | translate }}
        </button>
    </div>
</div>

<!-- Add Company Details -->
<div class="d-flex flex-column flex-1 scroll-y" *ngIf="formData.mode == 'add'">
    <div class="popup-header">
        <button (click)="cancel()" class="btn-close popup-close position-absolute opacity-100"></button>
        <div class="popup-title-wrapper d-flex align-items-center" *ngIf="productType != ProductType.Hospital">
            <span *ngIf="!formData.data"
                class="popup-title d-inline-flex align-items-center fs-sm fw-bold position-relative">{{
                "Company.addCompany" |
                translate }}</span>
        </div>
        <div class="popup-title-wrapper d-flex align-items-center" *ngIf="productType == ProductType.Hospital">
            <span *ngIf="!formData.data"
                class="popup-title d-inline-flex align-items-center fs-sm fw-bold position-relative">{{
                "Company.addRoom" |
                translate }}</span>
        </div>
    </div>
    <form class="popup-form" [formGroup]="formCompany" autocomplete="off" novalidate>
        <div class="popup-content">
            <div class="row gx-5" *ngIf="productType != ProductType.Hospital && !SeepzWorkFlow">
                <div class="col-md-6">
                    <div class="row mb-3">
                        <label for="" class="col-md-3 col-form-label">{{ "Company.light" | translate
                            }}<span class="mendatory">*</span></label>
                        <div class="col-md-9">
                            <div class="d-flex gap-3">
                                <!-- <div class="d-grid">
                                    <input id="file" name="file" accept="image/x-png,image/jpeg" onclick="this.value = null" formControlName="lightThemeLogoUrl" class="custom-file-input" type="file" (change)="onFileChange($event)" />
                                    <mat-error *ngFor="let message of showValidationMessages('lightLogo')">
                                        {{ message }}
                                    </mat-error>
                                </div> -->
                                <div *ngIf="!imgpreview"
                                    class="theme-logo-wrapper d-flex align-items-center justify-content-center border overflow-hidden p-1">
                                    <!-- <img src="assets/images/login-vams-logo.png" class="img-fluid" alt="Logo" /> -->
                                    <img [src]="LightLogoUrl" class="img-fluid" alt="Logo" />
                                </div>
                                <div *ngIf="imgpreview"
                                    class="theme-logo-wrapper d-flex align-items-center justify-content-center border overflow-hidden p-1">
                                    <!-- <img *ngFor="let item of base64textString" class="img-fluid" src="{{ item }}" alt="Logo" /> -->
                                    <img [src]="LightLogoUrl" class="img-fluid" alt="Logo" />
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="row mb-3">
                        <label for="" class="col-md-3 col-form-label">{{ "Company.dark" | translate
                            }}<span class="mendatory">*</span></label>
                        <div class="col-md-9">
                            <div class="d-flex gap-3">
                                <!-- <div class="d-grid">
                                    <input id="file" name="file" accept="image/x-png,image/jpeg" onclick="this.value = null" formControlName="darkThemeLogoUrl" class="custom-file-input" type="file" (change)="onFileChangeForDarkLogo($event)" />
                                    <mat-error *ngFor="let message of showValidationMessages('darkLogo')">
                                        {{ message }}
                                    </mat-error>
                                </div> -->
                                <div *ngIf="!darkLogoPreview"
                                    class="theme-logo-wrapper d-flex align-items-center justify-content-center bg-dark overflow-hidden p-1">
                                    <!-- <img src="assets/images/VAMS_Logo_Dark.png" class="img-fluid" alt="Logo" /> -->
                                    <img [src]="darkLogoUrl" class="img-fluid" alt="Logo" />
                                </div>
                                <div *ngIf="darkLogoPreview"
                                    class="theme-logo-wrapper d-flex align-items-center justify-content-center bg-dark overflow-hidden p-1">
                                    <!-- <img class="img-fluid" *ngFor="let item of base64textStringForDarkImg" src="{{ item }}" alt="Logo" /> -->
                                    <img [src]="darkLogoUrl" class="img-fluid" alt="Logo" />
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="row gx-5">
                <div class="col-md-6">
                    <div class="row mb-3">
                        <label for="feFirstName" class="col-md-3 col-form-label">{{ "Company.name" | translate
                            }}<span class="mendatory">*</span></label>
                        <div class="col-md-9">
                            <input type="text" autocomplete="off" class="form-control" id="feFirstName"
                                formControlName="name" maxlength="100"
                                placeholder="{{ 'Company.CompanyNameRequired' | translate }}" />
                            <mat-error *ngFor="let message of showValidationMessages('name')">
                                {{ message }}
                            </mat-error>
                        </div>
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="row mb-3">
                        <label for="feLastName" class="col-md-3 col-form-label">{{ "Company.shortName" | translate
                            }}<span class="mendatory">*</span></label>
                        <div class="col-md-9">
                            <input type="text" autocomplete="off" class="form-control" id="feLastName"
                                formControlName="shortName" maxlength="20" placeholder="{{
                  'Company.CompanyShortNameRequired' | translate
                }}" />
                            <mat-error *ngFor="let message of showValidationMessages('shortName')">
                                {{ message }}
                            </mat-error>
                        </div>
                    </div>
                </div>
            </div>
            <div class="row gx-5">
                <div class="col-md-6">
                    <div class="row mb-3">
                        <label for="feLastName1" class="col-md-3 col-form-label">{{ "Company.email" | translate }}
                            <span *ngIf="!isExcel" class="mendatory">*</span>
                        </label>
                        <div class="col-md-9">
                            <input type="email" autocomplete="off" class="form-control" id="feLastName1"
                                formControlName="email" maxlength="150"
                                placeholder="{{'Company.PleaseEnterEmailAddress' | translate}}" />
                            <mat-error *ngFor="let message of showValidationMessages('email')">
                                {{ message }}
                            </mat-error>
                        </div>
                    </div>
                </div>
                <div class="col-md-6" *ngIf="formData.data">
                    <div class="row mb-3">
                        <label for="feLastName2" class="col-md-3 col-form-label">{{ "Company.status" | translate
                            }}<span class="mendatory">*</span></label>
                        <div class="col-md-9">
                            <div class="select-control-group position-relative">
                                <select class="form-control" formControlName="status">
                                    <option value="" disabled selected hidden>
                                        {{ "EmployeeForm.PleaseSelectStatus" | translate }}">
                                    </option>
                                    <option selected *ngFor="let name of statusList" [value]="name">
                                        {{ name }}
                                    </option>
                                </select>
                            </div>
                            <mat-error *ngFor="let message of showValidationMessages('status')">
                                {{ message }}
                            </mat-error>
                        </div>
                    </div>
                </div>
            </div>
            <!-- <div class="row gx-5" *ngIf="!isExcel">
          <div class="col-md-6 col-sm-12">
                        <div class="createCompany">
                            <div class="createCompany-set1">
                                <label for="feLastName">Company URL <span class="mendatory">*</span></label>
                            </div>
                            <div class="createCompany-set2">    
                                <input type="text" class="form-control" id="feLastName" formControlName="companyUrl">
                                <mat-error *ngFor="let message of showValidationMessages('companyUrl')">
                                    {{message}}<br>
                                </mat-error>
                            </div>    
                        </div>
                    </div>
        </div> -->
            <!-- <div class="form-row row">
                    <div class="col-md-6 col-sm-12">
                        <div class="createCompany">
                            <div class="createCompany-set1">
                                <label for="feFirstName">Status <span class="mendatory">*</span></label>
                            </div>
                            <div class="createCompany-set2">    
                                <input type="text" class="form-control" id="feFirstName" formControlName="status">
                                <mat-error *ngFor="let message of showValidationMessages('status')">
                                    {{message}}<br>
                                </mat-error>
                            </div>    
                        </div>
                    </div>
                    
                </div>
            <div class="form-row">
                <div class="form-group col-md-6">
                    <label for="feFirstName">Status <span class="mendatory">*</span></label>
                    <input type="text" class="form-control" id="feFirstName" formControlName="status">
                    <mat-error *ngFor="let message of showValidationMessages('status')">
                        {{message}}<br>
                    </mat-error>
                </div>
                <div class="form-group col-md-6"> -->
            <!-- <label for="feFirstName">Status <span class="mendatory">*</span></label>
                    <input type="text" class="form-control" id="feFirstName" formControlName="status">
                    <mat-error *ngFor="let message of showValidationMessages('status')">
                        {{message}}<br>
                    </mat-error>
                </div> -->
            <!-- <div class="row createCompany-button-space">
                <div class="col-md-6">
                    <button mat-raised-button (click)="addMoreAdmin()" class="add-more-button" 
                    [disabled]="formCompany.get('adminItem')['controls'].length>1">
                        <span *ngIf="!multiAdmin">Add Admin</span>
                        <span *ngIf="multiAdmin">Add More Admin</span>
                    </button>
                </div>
                <div class="col-md-6">
                </div>
            </div> -->
            <div class="card bg-floral-white" [formGroup]="level3Address">
                <div class="card-body pb-2">
                    <h6 class="card-title fs-sm fw-semi-bold mb-3" *ngIf="productType != ProductType.Hospital">
                        {{ "Company.officeLocation" | translate }}
                    </h6>
                    <h6 class="card-title fs-sm fw-semi-bold mb-3" *ngIf="productType == ProductType.Hospital">
                        {{ "Company.roomDetails" | translate }}
                    </h6>
                    <div class="row gx-5">
                        <div class="col-md-6">
                            <div class="row mb-3">
                                <label for="feFirstName2" class="col-md-3 col-form-label">{{ "Company.building" |
                                    translate }}
                                    <span class="mendatory">*</span></label>
                                <div class="col-md-9">
                                    <input type="text"  placeholder="{{'Company.selectBuilding' | translate}}" formControlName="building"
                                        aria-label="Number" matInput [matAutocomplete]="auto" class="form-control">
                                    <mat-autocomplete #auto="matAutocomplete" [displayWith]="displayWith">
                                        <mat-option *ngFor="let bldg of buildingList" [value]="bldg" class="fs-sm"
                                            (onSelectionChange)="getValue($event)">
                                            {{ bldg.name }}
                                        </mat-option>
                                    </mat-autocomplete>
                                    <!-- <mat-select disableOptionCentering class="form-control" placeholder="Select Building" formControlName="building">
                                            <mat-option *ngFor="let bldg of buildingList" [value]="bldg.level2Id">
                                                {{ bldg.name }}
                                            </mat-option>
                                        </mat-select> -->

                                    <!-- <select class="form-control" formControlName="building">
                                            <option [ngValue]="null" [disabled]="true">
                                                {{ "Company.building_placeholder" | translate }}
                                            </option>
                                            <option *ngFor="let bldg of buildingList" value="{{ bldg.level2Id }}">
                                                {{ bldg.name }}
                                            </option> -->
                                    <!--
                    <option value="checkIn">Check-In</option>
                    <option (click)="openReScheduleDialog()" value="reschedule">Reschedule</option>
                    -->
                                    <!-- </select> -->
                                    <mat-error *ngFor="
                      let message of showValidationMessageForDynamicContent(
                        'building',
                        level3Address
                      )
                    ">
                                        {{ message }}
                                    </mat-error>
                                    <mat-error *ngIf="errorInBuilding">
                                        {{'Company.validbuilding'|translate}}
                                    </mat-error>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="row mb-3">
                                <label for="feFirstName3" class="col-md-3 col-form-label">{{ "Company.unit" | translate
                                    }}<span class="mendatory">*</span></label>
                                <div class="col-md-9">
                                    <input type="text" autocomplete="off" class="form-control"
                                        formControlName="officeNo" maxlength="20"
                                        placeholder="{{ 'Company.office_plaseholder' | translate }}" />
                                    <mat-error *ngFor="
                      let message of showValidationMessageForDynamicContent(
                        'officeNo',
                        level3Address
                      )
                    ">
                                        {{ message }}
                                    </mat-error>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row gx-5">
                        <div class="col-md-6">
                            <div class="row mb-3">
                                <label for="feFirstName4" class="col-md-3 col-form-label">{{ "Company.contact" |
                                    translate }}
                                    <span *ngIf="!isExcel" class="mendatory">*</span></label>
                                <div class="col-md-9">
                                    <ngx-intl-tel-input class="telephone-control-group" [cssClass]="'form-control'"
                                        [preferredCountries]="preferredCountries" [enableAutoCountrySelect]="false"
                                        [enablePlaceholder]="true" [searchCountryFlag]="true"
                                        [searchCountryField]="[SearchCountryField.All]" [selectFirstCountry]="false"
                                        [selectedCountryISO]="selectedCountry" [maxLength]="'15'"
                                        [separateDialCode]="separateDialCode" [preferredCountries]="['us']" name="phone"
                                        formControlName="contactMobile" appMobileNumberFormat>
                                    </ngx-intl-tel-input>
                                    <mat-error
                                        *ngIf="formCompany.controls.level3Address.get('contactMobile').hasError('validatePhoneNumber')">
                                        {{ "error_messages.invalid_contact_format" |translate }}<br />
                                    </mat-error>
                                    <!-- <ng-container *ngIf="formCompany.controls.level3Address['controls'].contactMobile.touched">
                    <mat-error
                      *ngFor="let message of showValidationMessageForDynamicContent('contactMobile', level3Address)">
                      {{message}}<br>
                    </mat-error>
                  </ng-container> -->
                                </div>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="row mb-3">
                                <label for="feFirstName5" class="col-md-3 col-form-label">{{ "Company.floor" | translate
                                    }}<span class="mendatory">*</span></label>
                                <div class="col-md-9">
                                    <input type="text" autocomplete="off" class="form-control" formControlName="floorNo"
                                        maxlength="20" placeholder="{{ 'Company.floor_plaseholder' | translate }}" />
                                    <mat-error
                                        *ngFor="let message of showValidationMessageForDynamicContent('floorNo',level3Address)">
                                        {{ message }}
                                    </mat-error>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div *ngIf="!isExcel && productType != ProductType.Hospital">
                        <div [formGroup]="level3Admin">
                            <div class="row gx-5">
                                <div class="col-md-6">
                                    <div class="row mb-3">
                                        <label for="feFirstName6" class="col-md-3 col-form-label">
                                            {{ "Company.adminEmail" | translate
                                            }}<span class="mendatory">*</span></label>
                                        <div class="col-md-9">
                                            <input type="text" autocomplete="off" class="form-control"
                                                formControlName="emailId" maxlength="150"
                                                placeholder="{{'Company.PleaseEnterEmailAddress' | translate}}" />
                                            <mat-error
                                                *ngFor="let message of showValidationMessageForDynamicContent('emailId',level3Admin)">
                                                {{ message }}
                                            </mat-error>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="row mb-3">
                                        <label for="feFirstName7" class="col-md-3 col-form-label">
                                            {{ "Company.phone" | translate }}</label>
                                        <div class="col-md-9">
                                            <ngx-intl-tel-input class="telephone-control-group"
                                                [cssClass]="'form-control'" [preferredCountries]="preferredCountries"
                                                [enableAutoCountrySelect]="false" [enablePlaceholder]="true"
                                                [searchCountryFlag]="true"
                                                [searchCountryField]="[SearchCountryField.All]"
                                                [selectFirstCountry]="false" [selectedCountryISO]="selectedCountry"
                                                [phoneValidation]="true" [separateDialCode]="separateDialCode"
                                                [preferredCountries]="['us']" name="phone" formControlName="mobileNo"
                                                appMobileNumberFormat>
                                            </ngx-intl-tel-input>
                                            <mat-error *ngIf="
                         
                          formCompany.controls.level3Admin
                            .get('mobileNo')
                            .hasError('validatePhoneNumber')
                        ">
                        {{ "error_messages.invalid_contact_format" |translate }}
                                            </mat-error>
                                            <!-- <ng-container *ngIf="formCompany.controls.level3Address['controls'].contactMobile.touched">
                        <mat-error
                          *ngFor="let message of showValidationMessageForDynamicContent('mobileNo', level3Admin)">
                          {{message}}
                        </mat-error>
                      </ng-container> -->
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="row gx-5">
                                <div class="col-md-6">
                                    <div class="row mb-3">
                                        <label for="feFirstName8" class="col-md-3 col-form-label">{{ "Company.firstName"
                                            | translate
                                            }}<span class="mendatory">*</span></label>
                                        <div class="col-md-9">
                                            <input type="text" autocomplete="off" class="form-control"
                                                formControlName="firstName" maxlength="50" placeholder="{{
                          'Company.PleaseEnterFirstName' | translate
                        }}" />
                                            <mat-error *ngFor="
                          let message of showValidationMessageForDynamicContent(
                            'firstName',
                            level3Admin
                          )
                        ">
                                                {{ message }}
                                            </mat-error>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="row mb-3">
                                        <label for="feFirstName9" class="col-md-3 col-form-label">{{ "Company.lastName"
                                            |
                                            translate
                                            }}<span class="mendatory">*</span></label>
                                        <div class="col-md-9">
                                            <input type="text" autocomplete="off" class="form-control"
                                                formControlName="lastName" maxlength="50" placeholder="{{
                          'Company.PleaseEnterLastName' | translate
                        }}" />
                                            <mat-error *ngFor="
                          let message of showValidationMessageForDynamicContent(
                            'lastName',
                            level3Admin
                          )
                        ">
                                                {{ message }}
                                            </mat-error>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <!-- <div class="row createCompany-button-space">
            <div class="col-md-6">
              <button mat-raised-button (click)="addMoreOffice()" class="add-more-button">
                <span>Add Unit</span>
              </button>
            </div>
            <div class="col-md-6">
            </div>
          </div> -->
        </div>
        <div class="popup-footer d-flex align-items-center gap-3">
            <button class="btn btn-sm btn-primary-dark px-3" *ngIf="formData.data" (click)="onSubmit()">
                {{ "Company.save" | translate }} 
            </button>
            <!-- <button class="btn btn-sm btn-white  px-3" *ngIf="formData.data" (click)="cancel()">Cancel</button> -->
            <button class="btn btn-sm btn-primary-dark px-3" *ngIf="!formData.data" (click)="addCompany()">
                {{ "Company.add" | translate }}
            </button>
            <button class="btn btn-sm btn-white px-3" (click)="resetForm()">
                {{"Company.clear" |translate}}
            </button>
        </div>
    </form>
</div>

<!-- Edit Company Details -->
<div class="d-flex flex-column flex-1 scroll-y" *ngIf="formData.mode == 'edit' && formCompanyEdit">
    <div class="popup-header">
        <button (click)="cancel()" class="btn-close popup-close position-absolute opacity-100"></button>
        <div class="popup-title-wrapper d-flex align-items-center" *ngIf="productType != ProductType.Hospital">
            <span class="popup-title d-inline-flex align-items-center fs-sm fw-bold position-relative">{{
                "Company.editCompany" | translate }}</span>
        </div>
        <div class="popup-title-wrapper d-flex align-items-center" *ngIf="productType == ProductType.Hospital">
            <span class="popup-title d-inline-flex align-items-center fs-sm fw-bold position-relative">{{
                "Company.editRoom" | translate }}</span>
        </div>
    </div>
    <form class="popup-form" [formGroup]="formCompanyEdit" autocomplete="off">
        <div class="popup-content">
            <div class="row gx-5" *ngIf="productType != ProductType.Hospital && !SeepzWorkFlow">
                <div class="col-md-6">
                    <div class="row mb-3">
                        <label for="" class="col-md-3 col-form-label">{{ "Company.light" | translate }}
                            <span class="mendatory">*</span></label>
                        <div class="col-md-9">
                            <div class="d-flex gap-3">
                                <!-- <div class="d-grid">
                                    <input id="file" name="file" accept="image/x-png,image/jpeg" onclick="this.value = null" class="custom-file-input" type="file" (change)="onFileChange($event)" />
                                    <mat-error *ngFor="let message of showValidationMessages('lightLogo')">
                                        {{ message }}
                                    </mat-error>
                                </div> -->
                                <div *ngIf="!imgpreview && LightLogoUrl"
                                    class="theme-logo-wrapper d-flex align-items-center justify-content-center border overflow-hidden p-1">
                                    <!-- <img src="assets/images/login-vams-logo.png" class="img-fluid" alt="Logo" /> -->
                                    <img [src]="LightLogoUrl" class="img-fluid" alt="Logo" />
                                </div>
                                <div *ngIf="imgpreview && LightLogoUrl"
                                    class="theme-logo-wrapper d-flex align-items-center justify-content-center border overflow-hidden p-1">
                                    <!-- <img *ngFor="let item of base64textString" class="img-fluid" src="{{ item }}" alt="Logo" /> -->
                                    <img [src]="LightLogoUrl" class="img-fluid" alt="Logo" />
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="row mb-3">
                        <label for="" class="col-md-3 col-form-label">{{ "Company.dark" | translate }}
                            <span class="mendatory">*</span></label>
                        <div class="col-md-9">
                            <div class="d-flex gap-3">
                                <!-- <div class="d-grid">
                                    <input id="file" name="file" accept="image/x-png,image/jpeg" onclick="this.value = null" class="custom-file-input" type="file" (change)="onFileChangeForDarkLogo($event)" />
                                    <mat-error *ngFor="let message of showValidationMessages('darkLogo')">
                                        {{ message }}
                                    </mat-error>
                                </div> -->
                                <div *ngIf="!darkLogoPreview && darkLogoUrl"
                                    class="theme-logo-wrapper d-flex align-items-center justify-content-center bg-dark overflow-hidden p-1">
                                    <!-- <img src="assets/images/VAMS_Logo_Dark.png" class="img-fluid" alt="Logo" /> -->
                                    <img [src]="enviroment.DefaultDarkTheamLogoUrl" class="img-fluid" alt="Logo" />
                                </div>
                                <div *ngIf="darkLogoPreview && darkLogoUrl"
                                    class="theme-logo-wrapper d-flex align-items-center justify-content-center bg-dark overflow-hidden p-1">
                                    <!-- <img class="img-fluid" *ngFor="let item of base64textStringForDarkImg" src="{{ item }}" alt="Logo" /> -->
                                    <img [src]="darkLogoUrl" class="img-fluid" alt="Logo" />
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="row gx-5">
                <div class="col-md-6">
                    <div class="row mb-3">
                        <label for="feFirstName4" class="col-md-3 col-form-label">{{ "Company.name" | translate
                            }}<span class="mendatory">*</span></label>
                        <div class="col-md-9">
                            <input type="text" autocomplete="off" class="form-control" id="feFirstName"
                                formControlName="name" maxlength="100" />
                            <mat-error *ngFor="
                  let message of showValidationMessageForDynamicContent(
                    'name',
                    formCompanyEdit
                  )
                ">
                                {{ message }}
                            </mat-error>
                        </div>
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="row mb-3">
                        <label for="feLastName3" class="col-md-3 col-form-label">{{ "Company.shortName" | translate
                            }}<span class="mendatory">*</span></label>

                        <div class="col-md-9">
                            <input type="text" autocomplete="off" class="form-control" id="feLastName"
                                formControlName="shortName" maxlength="20" />
                            <mat-error *ngFor="
                  let message of showValidationMessageForDynamicContent(
                    'shortName',
                    formCompanyEdit
                  )
                ">
                                {{ message }}
                            </mat-error>
                        </div>
                    </div>
                </div>
            </div>
            <div class="row gx-5">
                <div class="col-md-6">
                    <div class="row mb-3">
                        <label for="feLastName2" class="col-md-3 col-form-label">{{ "Company.email" | translate }}
                            <span *ngIf="!isExcel" class="mendatory">*</span></label>
                        <div class="col-md-9">
                            <input type="text" autocomplete="off" class="form-control" id="feLastName"
                                formControlName="email" maxlength="150" />
                            <mat-error *ngFor="
                  let message of showValidationMessageForDynamicContent(
                    'email',
                    formCompanyEdit
                  )
                ">
                                {{ message }}
                            </mat-error>
                        </div>
                    </div>
                </div>
                <div class="col-md-6" *ngIf="formData.data">
                    <div class="row mb-3">
                        <label for="feLastName1" class="col-md-3 col-form-label">{{ "Company.status" | translate
                            }}<span class="mendatory">*</span></label>
                        <div class="col-md-9">
                            <div class="select-control-group position-relative">
                                <select class="form-control" formControlName="status">
                                    <option selected *ngFor="let name of statusList" [value]="name">
                                        {{ name }}
                                    </option>
                                    <!-- <option value="INACTIVE">Inactive</option> -->
                                </select>
                            </div>
                            <mat-error *ngFor="
                  let message of showValidationMessageForDynamicContent(
                    'status',
                    formCompanyEdit
                  )
                ">
                                {{ message }}
                            </mat-error>
                        </div>
                    </div>
                </div>
            </div>
            <!-- <div class="row gx-5" *ngIf="">
                <div class="col-md-6">
                    <div class="row mb-3">
                        <label class="col-md-3 col-form-label">{{'Company.AccessMethod'|translate}}
                            <span class="mendatory">*</span>
                        </label>
                        <div class="col-md-9">
                            <div class="vams-checkbox-wrapper d-flex flex-wrap">
                                <ng-container *ngFor="let item of acessCantrolList | keyvalue ;let i=index">
                                    <mat-checkbox class="me-3" [checked]="selectedAccessCantrol.includes(convertToInt(item.value))" [disabled]="disabledAccessCantrol.includes(convertToInt(item.value))" (change)="getAccessCantrol($event,item,i)">
                                        {{'Company.'+item.key|translate}}
                                    </mat-checkbox>
                                </ng-container>
                            </div>
                        </div>
                    </div>
                </div>
            </div> -->
            <!-- <div class="row gx-5">
                <div class="col-md-6">
                  <button mat-raised-button (click)="addMoreAdmin()" class="add-more-button"
                    [disabled]="formCompanyEdit.get('adminItem')['controls'].length > 1">
                    <span *ngIf="!multiAdmin">Add Admin</span>
                    <span *ngIf="multiAdmin">Add More Admin</span>
                  </button>
                </div>
                <div class="col-md-6"></div>
              </div> -->
            <div class="d-grid gap-3 mb-3" formArrayName="level3CompanyUnits">
                <div class="card bg-floral-white" *ngFor="
            let unit of formCompanyEdit.controls.level3CompanyUnits['controls'];
            let i = index
          ">
                    <div class="card-body">
                        <div class="d-flex align-items-center gap-3 mb-3">
                            <h6 class="card-title flex-1 fs-sm fw-semi-bold mb-0 me-auto">
                                {{ "Company.unit" | translate }} {{ i + 1 }}
                            </h6>
                            <button *ngIf="!unit.get('companyUnitId').value"
                                class="btn btn-sm btn-link text-decoration-none border-0 d-flex align-items-center justify-content-center"
                                (click)="removeOffice(i)">
                                <i class="icon-delete fs-6 text-dark"></i>
                            </button>
                        </div>
                        <div formGroupName="{{ i }}">
                            <div formGroupName="level3Address">
                                <div class="row gx-5">
                                    <div class="col-md-6">
                                        <div class="row mb-3">
                                            <label for="feFirstName4" class="col-md-3 col-form-label">{{
                                                "Company.building" | translate }}
                                                <span class="mendatory">*</span></label>
                                            <div class="col-md-9">

                                                <!-- <mat-select disableOptionCentering class="form-control" placeholder="Select Building" formControlName="building">
                                                    <mat-option *ngFor="let bldg of buildingList" [value]="bldg.level2Id">
                                                        {{ bldg.name }}
                                                    </mat-option>
                                                </mat-select> -->

                                                <input type="text" placeholder="Select Building"
                                                    formControlName="building" aria-label="Number" matInput
                                                    [matAutocomplete]="auto" class="form-control">
                                                <mat-autocomplete #auto="matAutocomplete" [displayWith]="displayWith">
                                                    <mat-option *ngFor="let bldg of dynamicBuilding[i]" [value]="bldg"
                                                        class="fs-sm" (onSelectionChange)="getValue($event)">
                                                        {{ bldg.name }}
                                                    </mat-option>
                                                </mat-autocomplete>

                                                <!-- <div class="select-control-group position-relative">
                                                    <select class="form-control" formControlName="building">
                                                        <option *ngFor="let bldg of buildingList"
                                                            value="{{ bldg.level2Id }}">
                                                            {{ bldg.name }}
                                                        </option>
                                                    </select>
                                                </div> -->
                                                <mat-error
                                                    *ngFor="let message of showValidationMessageForDynamicContent( 'building', unit.get('level3Address') )">
                                                    {{ message }}
                                                </mat-error>
                                                <mat-error *ngIf="unit.errors">
                                                    {{ unit.errors.validbuilding }}
                                                </mat-error>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <div class="row mb-3">
                                            <label for="feFirstName3" class="col-md-3 col-form-label">{{ "Company.unit"
                                                |
                                                translate
                                                }}<span class="mendatory">*</span></label>
                                            <div class="col-md-9">
                                                <input autocomplete="off" type="text" class="form-control"
                                                    formControlName="officeNo" maxlength="20"
                                                    placeholder="{{ 'Company.office_plaseholder' | translate }}" />
                                                <mat-error
                                                    *ngFor="let message of showValidationMessageForDynamicContent( 'officeNo',unit.get('level3Address') )">
                                                    {{ message }}
                                                </mat-error>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="row gx-5">
                                    <div class="col-md-6">
                                        <div class="row mb-3">
                                            <label for="feFirstName2" class="col-md-3 col-form-label">{{
                                                "Company.contact" | translate
                                                }}<span *ngIf="!isExcel" class="mendatory">*</span></label>
                                            <div class="col-md-9">
                                                <ngx-intl-tel-input class="telephone-control-group"
                                                    [cssClass]="'form-control'"
                                                    [preferredCountries]="preferredCountries"
                                                    [enableAutoCountrySelect]="false" [enablePlaceholder]="true"
                                                    [searchCountryFlag]="true"
                                                    [searchCountryField]="[SearchCountryField.All]"
                                                    [selectFirstCountry]="false"
                                                    [selectedCountryISO]="selectedCountriesFoUnit[i] ? selectedCountriesFoUnit[i] : selectedCountry"
                                                    [phoneValidation]="true" [separateDialCode]="separateDialCode"
                                                    name="phone" formControlName="contactMobile" appMobileNumberFormat>
                                                </ngx-intl-tel-input>
                                                <mat-error
                                                    *ngFor=" let message of showValidationMessageForDynamicContent('contactMobile',unit.get('level3Address'))">
                                                    {{ message }}
                                                </mat-error>
                                                <mat-error
                                                    *ngIf="unit.get('level3Address')['controls'].contactMobile.hasError('validatePhoneNumber')">
                                                    {{ "error_messages.invalid_contact_format" |translate }}
                                                </mat-error>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <div class="row mb-3">
                                            <label for="feFirstName1" class="col-md-3 col-form-label">{{ "Company.floor"
                                                | translate
                                                }}<span class="mendatory">*</span></label>
                                            <div class="col-md-9">
                                                <input type="text" autocomplete="off" class="form-control"
                                                    formControlName="floorNo" maxlength="20" />
                                                <mat-error
                                                    *ngFor="let message of showValidationMessageForDynamicContent('floorNo',unit.get('level3Address'))">
                                                    {{ message }}
                                                </mat-error>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <!--
            <div *ngIf="adminsList">
              <div *ngFor="let adminData of adminsList | keyvalue">
                <div *ngFor="let admin of adminData.value">
                  <div *ngIf="adminData.key == unit.get('companyUnitId').value">
                    <div
                      class="row divider-line"
                      *ngIf="adminData.value.length == 1; else multiAdmins"
                    >
                      <div class="col-md-6 col-sm-12">
                        <div class="dilogbox-label">
                          {{ "Company.adminEmail" | translate }}
                        </div>
                        <div class="dilogbox-value">{{ admin["email"] }}</div>
                      </div>
                      <div class="col-md-6 col-sm-12">
                        <div class="dilogbox-label">
                          {{ "Company.cellNo" | translate }}
                        </div>
                        <div class="dilogbox-value">
                          {{ admin["mobileNo"] }}
                        </div>
                      </div>
                      <div class="col-md-6 col-sm-12">
                        <div class="dilogbox-label">
                          {{ "Company.firstName" | translate }}
                        </div>
                        <div class="dilogbox-value">
                          {{ admin["firstName"] }}
                        </div>
                      </div>
                      <div class="col-md-6 col-sm-12">
                        <div class="dilogbox-label">
                          {{ "Company.lastName" | translate }}
                        </div>
                        <div class="dilogbox-value">
                          {{ admin["lastName"] }}
                        </div>
                      </div>
                    </div>
                    <ng-template #multiAdmins>
                      <div class="col-md-6 col-sm-12">
                        <div class="dilogbox-label">
                          {{ admin["firstName"] }} {{ admin["lastName"] }}
                        </div>
                        <div class="dilogbox-value">
                          <p
                            class="cicon-cros-icon popup-close-button"
                            (click)="
                              removeFromAdminList(
                                admin['employeeId'],
                                unit.get('companyUnitId').value
                              )
                            "
                          ></p>
                          <p
                            class="show-icon"
                            (click)="employeeDetails(adminData['employeeId'])"
                          ></p>
                        </div>
                      </div>
                    </ng-template>
                  </div>
                </div>
              </div>
            </div>
            -->
                    </div>
                </div>
            </div>
            <button (click)="addMoreOffice()" class="btn btn-sm btn-white px-3">
                {{ "Company.addUnit" | translate }}
            </button>
        </div>
        <div class="popup-footer d-flex align-items-center gap-3">
            <button class="btn btn-sm btn-primary-dark px-3" *ngIf="formData?.mode == 'add'" (click)="addCompany()">
                {{ "CommonToken.Add" | translate }}
            </button>
            <button class="btn btn-sm btn-primary-dark px-3" *ngIf="formData?.mode == 'edit'" (click)="updateCompany()">
                {{ "CommonToken.Save" | translate }}
            </button>
            <button class="btn btn-sm btn-white px-3" *ngIf="formData?.mode == 'edit'" (click)="cancel()">
                {{ "CommonToken.Cancel" | translate }}
            </button>
            <button class="btn btn-sm btn-white px-3" *ngIf="formData?.mode == 'add'" (click)="resetForm()">
                {{ "CommonToken.Clear" | translate }}
            </button>
        </div>
    </form>
</div>